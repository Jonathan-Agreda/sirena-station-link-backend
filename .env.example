# ==========================
# SirenaStationLink - BACKEND (.env.example)
# ==========================

# --- App ---
NODE_ENV=development
PORT=4000
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
BACKEND_PUBLIC_URL=http://localhost:4000

# --- Database ---
DATABASE_URL=postgresql://sirena:sirena_pass@postgres:5432/sirena_db?schema=public
# ðŸ‘‡ Shadow DB con superusuario (permite CREATEDB) - solo para migraciones Prisma
SHADOW_DATABASE_URL=postgresql://postgres:postgres@postgres:5432/postgres

# --- Keycloak ---
KEYCLOAK_BASE_URL=http://kc-sirena:8080
KEYCLOAK_REALM=alarma
KEYCLOAK_CLIENT_ID=backend-api
KEYCLOAK_REDIRECT_URI=https://sirenastationlink.disxor.com/login
KEYCLOAK_CLIENT_SECRET=CHANGE-ME-BACKEND-SECRET
USER_DEFAULT_PASSWORD=changeme123

# --- Tokens ---
ACCESS_TOKEN_TTL_SEC=540          # 9 min
REFRESH_TOKEN_TTL_SEC=3600        # 60 min
REFRESH_ROTATE_STRICT=true
REFRESH_MAX_REUSE=0

# --- Cookies de refresh (solo Web) ---
REFRESH_COOKIE_NAME=ssr_refresh
REFRESH_COOKIE_DOMAIN=
REFRESH_COOKIE_SECURE=false
REFRESH_COOKIE_SAMESITE=Lax
REFRESH_COOKIE_PATH=/api/auth/refresh
REFRESH_COOKIE_HTTPONLY=true

# --- MQTT (EMQX) ---
EMQX_HOST=emqx-sirena
EMQX_PORT=1883
EMQX_USERNAME=srv-backend
EMQX_PASSWORD=srv-backend-secret

# --- Logs ---
LOG_LEVEL=debug

# --- Devices ---
DEFAULT_CMD_TTL_MS=300000
